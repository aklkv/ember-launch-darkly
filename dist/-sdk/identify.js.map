{"version":3,"file":"identify.js","sources":["../../src/-sdk/identify.ts"],"sourcesContent":["import { getCurrentContext } from './context.ts';\nimport type { LDUser } from 'launchdarkly-js-client-sdk';\n\n/**\n * Result returned by `identify()`.\n */\nexport interface IdentifyResult {\n  /** Whether the identify call completed successfully. */\n  isOk: boolean;\n\n  /** The error if the identify call failed, otherwise `undefined`. */\n  error?: unknown;\n}\n\nexport async function identify(\n  user: LDUser,\n  hash?: string,\n): Promise<IdentifyResult> {\n  const context = getCurrentContext();\n\n  if (!context) {\n    return {\n      isOk: false,\n      error: new Error(\n        'LaunchDarkly has not been initialized. Call `initialize()` before `identify()`.',\n      ),\n    };\n  }\n\n  if (context.isLocal) {\n    return { isOk: true };\n  }\n\n  try {\n    const flags = await context.client?.identify(user, hash);\n\n    context.replaceFlags(flags as Record<string, unknown>);\n\n    return { isOk: true };\n  } catch (error) {\n    return { isOk: false, error };\n  }\n}\n"],"names":["identify","user","hash","context","getCurrentContext","isOk","error","Error","isLocal","flags","client","replaceFlags"],"mappings":";;AAGA;AACA;AACA;;AASO,eAAeA,QAAQA,CAC5BC,IAAY,EACZC,IAAa,EACY;AACzB,EAAA,MAAMC,OAAO,GAAGC,iBAAiB,EAAE;EAEnC,IAAI,CAACD,OAAO,EAAE;IACZ,OAAO;AACLE,MAAAA,IAAI,EAAE,KAAK;AACXC,MAAAA,KAAK,EAAE,IAAIC,KAAK,CACd,iFACF;KACD;AACH,EAAA;EAEA,IAAIJ,OAAO,CAACK,OAAO,EAAE;IACnB,OAAO;AAAEH,MAAAA,IAAI,EAAE;KAAM;AACvB,EAAA;EAEA,IAAI;AACF,IAAA,MAAMI,KAAK,GAAG,MAAMN,OAAO,CAACO,MAAM,EAAEV,QAAQ,CAACC,IAAI,EAAEC,IAAI,CAAC;AAExDC,IAAAA,OAAO,CAACQ,YAAY,CAACF,KAAgC,CAAC;IAEtD,OAAO;AAAEJ,MAAAA,IAAI,EAAE;KAAM;EACvB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,OAAO;AAAED,MAAAA,IAAI,EAAE,KAAK;AAAEC,MAAAA;KAAO;AAC/B,EAAA;AACF;;;;"}